#multiclicker.js

Universal mouse and touch normalized event handler

##Intro

I started multiclicker when I needed handler that supported single and double mouseclicks on the same element - you cannot set standrad onclick and on dblclick event handlers on the same element, because onclick fires always, without knowledge of existence of dblclick handler. 

Then I added dragging support, then came along touch devices, I added touch/click and hold support, then touch gestures and finally mousewheel. Mousewheel is added to try to use two-finger-scroll on trackpad like touchmove. 

Multiclicker also emits synhesized mouseover/mouseout events and normalizes event targets on dragging ( on touchmove standard event.target does not change )

Best practice is to attach multiclicker to some bigger wrapper element, not to single elements, and then track event target. Generally I attach multiclicker to `document`.

`multiclicker.js` is written in vanilla Javascript and has one possible dependancy. 

## Usage

Multiclicker sets ourselves up into `window.atirip` namespace.

**Detect your browser features first**

Include `features-detector.js`

    <script src="path/to/features-detector.js" type="text/javascript"></script>

Or alternatively use your own detector of wish and provide the following classes and variables as below ( I use typical iOS webkit browser values here as an example )

	atirip.is = {
		touch: true
		android: false
	}
	atirip.events = {
		start: 'touchstart',
		move: 'touchmove',
		end: 'touchend',
		cancel: 'touchcancel'
	}

**Include multiclicker.js:**

    <script src="path/to/multiclicker.js" type="text/javascript"></script>

**Initalize multiclicker**

	new atirip.multiclicker({
		holdDelay: 0,
		doubleClick: false,
		clickDelay: 300,
		throttleClick: true,
		fireOver: true,
		callback: function(type, event, data, handler) {},
		context: window,
		clickPassthruTags: ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON', 'A'],
		androidPreventStart: true,
		handleModifierEvents: false
	})

Where:  
__holdDelay__ (recommended to) set to 1000 for touch and hold support, default `0`, no support  
__doubleClick__ whether to handle doubleclicks, default `false`  
__clickDelay__ delay in ms to wait for doubleclick, default `300`  
__throttleClick__ whether to throttle click event firing, if true, then throttle with clickDelay, default `false`  
__fireOver__ whether to fire mouseover events, default `true`  
__callback__  your event handler function  
__context__ context in which to call `callback`, default `window`  
__clickPassthruTags__ click's at passthru tags are ignored and not processed, default `['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON', 'A']`  
__distance__ distance to drag before hold, click is canceled or drag is initalised, default 10px on touch, 5px on mouse  
__handleModifierEvents__ whether to handle mouse events when modifier key (shift, alt, ctrl, meta) is pressed, default `false` 

**Process multiclicker events**

Write callback function:

	callback: function(type, event, data, handler) {
	
	}

Where:  
__type__ is event type emitted, multiclicker emits:  

`start` start is fired when it starts to listen - mousedown or touchstart, when it listens to doubleclick/doubletap, start is fired only once. It's more like informational event only, no real use  

`stop` stop is fired when listening is done, at final mouseup or touchend, when it listens to doubleclick/doubletap, stop is fired only once. Stop is useful to "clear some mess"

`hold` fired when clicked/touched and hold, any movement over small threshold (`distance` parameter) will cancel waiting

`dragstart` only event that expects return value, return `true` if you want to start to receive drag events

`drag` fired while dragging

`dragstop` fired when dragging stopped,

`over`, `out`  emulated mouseover, mouseout on all devices

`wheel` fired on mousewheel

`click`, `doubleclick`, `twofingertap` self explanatory, i guess

__event__ event object passed to multiclicker, slight normalization (lifted from jQuery) on `event.which`, `event.target`, `event.relatedTarget`

__data__ normalized data generated by multiclicker 

`originalTarget` target when dragging started
`currentTarget` normalized event current target, on iOS on drag target is always the original element
`lastTarget`: lastTarget is target previously overed, but now is out

`horizontal`, `vertical`, `left`, `right`, `up`, `down` dragging direction, boolean

`x`, `y` coordinates at which dragging started

`px`, `py` current coordinates

`dx`, `dy` delta dragged

`ddx`, `ddy` previous delta, e.g. delta between coordinates in this and previous event fired

`modifier` boolean, whether modifier key pressed

__handler__ self

## DEMO

Theres a demo included which needs [https://github.com/atirip/mover.js](https://github.com/atirip/mover.js)

## TODO

* Test, test, test

## Contact me

For support, remarks and requests, please mail me at [atirip@yahoo.com](mailto:atirip@yahoo.com).

## License

Copyright (c) 2012 Priit Pirita, released under the MIT license.